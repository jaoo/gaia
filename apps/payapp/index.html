<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>Mozilla In-app Payment Tester</title>

  <link rel="stylesheet" media="screen,projection,tv" href="/media/css/app_payments/base.css" />

  <script language="javascript" type="text/javascript">
    function addjson() {
      var d = new Date();
      var json = {};
      json.aud = "mockpayprovider.phpfogapp.com";
      json.iss = "34XV37BDRBBF4KZCS9QU";
      json.request = {};
      json.request.description = "Virtual chocolate cake to fill your virtual tummy";
      json.request.price = 10.50;
      json.request.priceTier = 1;
      json.request.productdata = "my_product_id=1234&my_session_id=XYZ";
      json.request.currencyCode = "USD";
      json.request.name = "Pice of Cake";
      json.exp = d.getTime();
      json.iat = d.getTime() + 3600;
      json.typ = "mock/payments/inapp/v1";

      document.pay_form.pay_request.value = JSON.stringify(json);
      document.pay_form.pay_appkey.value = "34XV37BDRBBF4KZCS9QU";
      document.pay_form.pay_appsecret.value = "551d8a71d0090fb68cc49e2d481c36a0ff1e37bc96a9688bba3e66881e6f8532";
    }
  </script>
</head>
<body onload="addjson()">
  <div id="container">
    <section id="generator">
      <h2>Generate an in-app payment</h2>
      <a id="start-over" href="#">Start over</a>
      <form name="pay_form">
        <input type="text" name="pay_appkey" id="pay-appkey"></input>
        <input type="text" name="pay_appsecret" id="pay-appsecret"></input>
        <textarea name="pay_request" id="pay-request"></textarea>
        <div id="call-pay">
          <button>call navigator.pay()</button>
        </div>
      </form>
    </section>
    <section id="log"><pre></pre></section>
  </div>

  <script src="/media/js/libs/jquery-1.4.4.min.js"></script>
  <script src="/media/js/app_payments.js"></script>
  <script src="/media/js/mozmarket.js"></script>

</body>
</html>
