<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>Mozilla In-app Payment Tester</title>

  <link rel="stylesheet" media="screen,projection,tv" href="/media/css/app_payments/base.css" />

  <script language="javascript" type="text/javascript">
    function addjson() {
      var d = new Date();
      var json = {};
      json.aud = "connect.qa-opentel-04.hi.inet";
      json.iss = "34XV37BDRBBF4KZCS9QU";
      json.request = {};
      json.request.description = "Virtual chocolate cake to fill your virtual tummy";
      json.request.price = 10.50;
      json.request.priceTier = 1;
      json.request.productdata = "my_product_id=1234&my_session_id=XYZ";
      json.request.currencyCode = "USD";
      json.request.name = "Pice of Cake";
      json.exp = d.getTime();
      json.iat = d.getTime() + 3600;
      json.typ = "tu.com/payments/inapp/v1";

      document.pay_form.pay_request.value = JSON.stringify(json);
    }
  </script>
</head>
<body onload="addjson()">
  <a id="fork-me" href="https://github.com/jaoo/inapp-pay-test">
    <img src="/media/img/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
  </a>
  <div id="container">
    <section id="generator">
      <h2>Generate an in-app payment
        <a href="https://developer.mozilla.org/en/Apps/In-app_payments">(docs)</a></h2>
      <a id="start-over" href="#">Start over</a>
      <form name="pay_form">
        <textarea name="pay_request" id="pay-request"></textarea>
        <div id="call-pay">
          <button>call navigator.pay()</button>
        </div>
      </form>
    </section>
    <section id="log"><pre></pre></section>
  </div>

  <script src="/media/js/libs/jquery-1.4.4.min.js"></script>
  <script src="/media/js/app_payments.js"></script>
  <script src="/media/js/mozmarket.js"></script>

</body>
</html>
